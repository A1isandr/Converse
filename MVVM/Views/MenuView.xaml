<rxui:ReactiveUserControl x:Class="YetAnotherMessenger.MVVM.Views.MenuView"
                          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                          xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                          xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                          xmlns:local="clr-namespace:YetAnotherMessenger.MVVM.Views"
                          xmlns:controls="clr-namespace:YetAnotherMessenger.Controls"
                          xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
                          xmlns:misc="clr-namespace:YetAnotherMessenger.Misc"
                          xmlns:vm="clr-namespace:YetAnotherMessenger.MVVM.ViewModels"
                          xmlns:rxui="http://reactiveui.net"
                          x:TypeArguments="vm:MenuViewModel"
                          mc:Ignorable="d" 
                          d:DesignHeight="600" d:DesignWidth="300">

    <UserControl.Resources>
        <misc:RectConverter x:Key="RectConverter"/>
    </UserControl.Resources>

    <Border
        Style="{StaticResource MainViewWrapper}">

        <Border x:Name="MenuWrapper">
            <Border.Clip>
                <RectangleGeometry 
                    RadiusX="20"
                    RadiusY="20">

                    <RectangleGeometry.Rect>
                        <MultiBinding Converter="{StaticResource RectConverter}">
                            <Binding ElementName="MenuWrapper" Path="ActualWidth"/>
                            <Binding ElementName="MenuWrapper" Path="ActualHeight"/>
                        </MultiBinding>
                    </RectangleGeometry.Rect>
                </RectangleGeometry>
            </Border.Clip>

            <Grid>
                <Expander x:Name="MainMenuExpander"
                          ExpandDirection="Left"
                          Style="{StaticResource CommonExpander}"
                          Collapsed="MainMenuExpander_OnCollapsed"
                          Expanded="MainMenuExpander_OnExpanded">

                    <local:MainMenuView/>
                </Expander>

                <Expander x:Name="ChatListMenuExpander"
                          ExpandDirection="Right"
                          Style="{StaticResource CommonExpander}"
                          Collapsed="MainMenuExpander_OnCollapsed"
                          Expanded="MainMenuExpander_OnExpanded">

                    <local:ChatListMenuView/>
                </Expander>
            </Grid>
        </Border>
    </Border>
    
</rxui:ReactiveUserControl>
